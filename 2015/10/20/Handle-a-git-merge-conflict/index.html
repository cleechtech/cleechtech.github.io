<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<!-- Use Handle a git merge conflict for dynamic title -->
	<title>El Blogo de Connor</title>

	<!-- Twitter bootstrap (via cdn) -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

	<!-- assets located in source folder -->
	<link rel="stylesheet" href="/css/main.css">

</head>

<div class='row text-center'>
	<form action="//github.us5.list-manage.com/subscribe/post?u=0713e0ac2a414eae4ca4bb786&amp;id=0bdf2bdb00" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="navbar-form" target="_blank" novalidate>
	    <div class="form-group">
	    	<label for="mce-EMAIL">Get notified when I post a new tutorial!</label>
		    <input type="email" value="" name="EMAIL" class="form-control" placeholder="Email address" required>
		    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
		    <div style="position: absolute; left: -5000px;" aria-hidden="true">
		    	<input type="text" name="b_0713e0ac2a414eae4ca4bb786_0bdf2bdb00" tabindex="-1" value="">
		    </div> 	
	    </div>
	    <input type="submit" value="Submit" name="subscribe" class="btn btn-warning">
	</form>
</div>
<body id='wrapper'>
	<div class='hideOverflow'>
		<div class='container blog-post'>
	<div class='row'>
		<div class='col-sm-12'>
			<a href='/' class="btn btn-yellow btn-circle" style='color:grey;'>
            	<i class="fa fa-home fa-2"></i>
        	</a>
		</div>
	</div>
	<div class='row'>
		<h1 class='author-name'>Handle a git merge conflict</h1>
	    2015-10-20 
	    <hr />
		<p>I’m starting to work with other people using git and github. Though I’m familiar with pushing, pulling, branching and cloning, I had not regularly encountered  merge conflicts until I began RocketU.</p>
<a id="more"></a>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> mergeConflicting</span><br><span class="line"><span class="built_in">cd</span> mergeConflicting</span><br><span class="line">touch play.js</span><br></pre></td></tr></table></figure>
<p>add some random code. This creates a gulp web server (after you run npm install):</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</span><br><span class="line">  connect = <span class="built_in">require</span>(<span class="string">'gulp-connect'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'webserver'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  connect.server(&#123;</span><br><span class="line">    livereload: <span class="literal">true</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'webserver'</span>]);</span><br></pre></td></tr></table></figure>
<p>Then add the files to .git and commit the changes:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add -A</span><br><span class="line">git <span class="operator"><span class="keyword">commit</span> -<span class="keyword">m</span> <span class="string">'add gulp process'</span></span></span><br></pre></td></tr></table></figure>
<p>All of this is standard. I’ve learned not to work on the master branch. So to create a new branch named develop and start working on it run:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -<span class="tag">b</span> develop</span><br></pre></td></tr></table></figure>
<p>Now we’re on the develop branch and we’ll make some changes. We’ll make some changes to master. When we try to merge develop into master we will have a merge conflict that we will resolve.</p>
<p>I added some more random tasks from the gulp API docs that changes lines 5 through 11.<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add -A</span><br><span class="line">git <span class="operator"><span class="keyword">commit</span> -<span class="keyword">m</span> <span class="string">'add gulp task on develop branch'</span></span></span><br></pre></td></tr></table></figure></p>
<p>Now I’ll go back to master, add some different code on the same lines and simulate a merge conflict.</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout <span class="literal">master</span></span><br></pre></td></tr></table></figure>
<p>Add some new stuff<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git add -A</span><br><span class="line">git <span class="operator"><span class="keyword">commit</span> -<span class="keyword">m</span> <span class="string">'make changes on master branch'</span></span><br><span class="line">git <span class="keyword">status</span></span><br><span class="line"><span class="keyword">On</span> branch <span class="keyword">master</span></span><br><span class="line"><span class="keyword">nothing</span> <span class="keyword">to</span> <span class="keyword">commit</span>, working <span class="keyword">directory</span> clean</span></span><br></pre></td></tr></table></figure></p>
<p>Cool, so everything is gravy on our respective branches. When I try to merge develop into master though we’ll get a conflict! Git does not know if it should display the file as I have it on master or as I have it on develop. We changed the same lines!</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git merge develop</span><br><span class="line"><span class="type">Auto</span>-merging play.js</span><br><span class="line"><span class="type">CONFLICT</span> (content): <span class="type">Merge</span> conflict <span class="keyword">in</span> play.js</span><br><span class="line"><span class="type">Automatic</span> merge failed; fix conflicts <span class="keyword">and</span> then commit the <span class="literal">result</span>.</span><br></pre></td></tr></table></figure>
<p>So that’s fun. If you look at the file it is a bit scary because your code is all messy and jacked up. Git will display &lt;&lt;&lt;&lt;&lt; and &gt;&gt;&gt;&gt;&gt; denoting where the two branches conflict.</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">// random changes on master branch</span><br><span class="line">gulp.src(<span class="string">'./client/templates/*.jade'</span>)</span><br><span class="line">  .<span class="keyword">pipe</span>(jade())</span><br><span class="line">  .<span class="keyword">pipe</span>(gulp.dest(<span class="string">'./build/templates'</span>))</span><br><span class="line">  .<span class="keyword">pipe</span>(minify())</span><br><span class="line">  .<span class="keyword">pipe</span>(gulp.dest(<span class="string">'./build/minified_templates'</span>));</span><br><span class="line"></span><br><span class="line">=======</span><br><span class="line"></span><br><span class="line">gulp.src(<span class="string">'client/js/**/*.js'</span>) // Matches <span class="string">'client/js/somedir/somefile.js'</span> <span class="keyword">and</span> resolves <span class="string">`base`</span> to <span class="string">`client/js/`</span></span><br><span class="line">  .<span class="keyword">pipe</span>(minify())</span><br><span class="line">  .<span class="keyword">pipe</span>(gulp.dest(<span class="string">'build'</span>));  <span class="regexp">//</span> Writes <span class="string">'build/somedir/somefile.js'</span></span><br><span class="line"></span><br><span class="line">gulp.src(<span class="string">'client/js/**/*.js'</span>, &#123; base: <span class="string">'client'</span> &#125;)</span><br><span class="line">  .<span class="keyword">pipe</span>(minify())</span><br><span class="line">  .<span class="keyword">pipe</span>(gulp.dest(<span class="string">'build'</span>));  <span class="regexp">//</span> Writes <span class="string">'build/js/somedir/somefile.js'</span></span><br><span class="line">  </span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; develop</span><br></pre></td></tr></table></figure>
<p>Until recently I would edit this file manually and commit my changes. Today we’ll use the git mergetool tool.</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">git mergetool</span><br><span class="line"></span><br><span class="line">This message is displayed because <span class="string">'merge.tool'</span> is <span class="operator">not</span> configured.</span><br><span class="line">See <span class="string">'git mergetool --tool-help'</span> <span class="operator">or</span> <span class="string">'git help config'</span> <span class="keyword">for</span> more details.</span><br><span class="line"><span class="string">'git mergetool'</span> will now attempt <span class="built_in">to</span> use <span class="constant">one</span> <span class="operator">of</span> <span class="operator">the</span> following tools:</span><br><span class="line">opendiff tortoisemerge emerge vimdiff</span><br><span class="line">Merging:</span><br><span class="line">play.js</span><br><span class="line"></span><br><span class="line">Normal <span class="built_in">merge</span> conflict <span class="keyword">for</span> <span class="string">'play.js'</span>:</span><br><span class="line">  &#123;<span class="built_in">local</span>&#125;: modified <span class="built_in">file</span></span><br><span class="line">  &#123;remote&#125;: modified <span class="built_in">file</span></span><br><span class="line">Hit <span class="constant">return</span> <span class="built_in">to</span> <span class="built_in">start</span> <span class="built_in">merge</span> resolution tool (opendiff):</span><br></pre></td></tr></table></figure>
<p>I use opendiff cause it gives you a GUI. Another tool is called vimdiff. I always get stuck in Vim and don’t like using it cause I’m afraid. Use opendiff. Hit enter.</p>
<p><img src="/content/images/2015/04/Screen-Shot-2015-04-23-at-8-22-13-PM.png" alt=""></p>
<p>Now you will see the two files and how they differ. Use the arrow keys to select left or right. I will select the right. Then save (File &gt; Save or command + S) then quit (File &gt; Quit or command + Q). Back in the terminal you’ll see some stuff.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">git mergetool</span><br><span class="line"></span><br><span class="line">This message is displayed because '<span class="operator"><span class="keyword">merge</span>.tool<span class="string">' is not configured.</span><br><span class="line">See '</span>git mergetool <span class="comment">--tool-help' or 'git help config' for more details.</span></span><br><span class="line"><span class="string">'git mergetool'</span> will <span class="keyword">now</span> attempt <span class="keyword">to</span> <span class="keyword">use</span> one <span class="keyword">of</span> the <span class="keyword">following</span> tools:</span><br><span class="line">opendiff tortoisemerge emerge vimdiff</span><br><span class="line">Merging:</span><br><span class="line">play.js</span><br><span class="line"></span><br><span class="line"><span class="keyword">Normal</span> <span class="keyword">merge</span> conflict <span class="keyword">for</span> <span class="string">'play.js'</span>:</span><br><span class="line">  &#123;<span class="keyword">local</span>&#125;: modified <span class="keyword">file</span></span><br><span class="line">  &#123;remote&#125;: modified <span class="keyword">file</span></span><br><span class="line">Hit <span class="keyword">return</span> <span class="keyword">to</span> <span class="keyword">start</span> <span class="keyword">merge</span> resolution tool (opendiff): </span><br><span class="line"><span class="number">2015</span>-<span class="number">04</span>-<span class="number">23</span> <span class="number">20</span>:<span class="number">21</span>:<span class="number">49.350</span> FileMerge[<span class="number">3018</span>:<span class="number">303</span>] Invalid color <span class="keyword">System</span>, labelColor (<span class="keyword">warning</span> given <span class="keyword">only</span> once)</span><br><span class="line"><span class="number">2015</span>-<span class="number">04</span>-<span class="number">23</span> <span class="number">20</span>:<span class="number">21</span>:<span class="number">49.516</span> FileMerge[<span class="number">3018</span>:<span class="number">303</span>] Unable <span class="keyword">to</span> <span class="keyword">load</span> platform <span class="keyword">at</span> <span class="keyword">path</span> /Applications/Xcode.app/<span class="keyword">Contents</span>/Developer/Platforms/iPhoneOS.platform</span><br><span class="line"><span class="number">2015</span>-<span class="number">04</span>-<span class="number">23</span> <span class="number">20</span>:<span class="number">21</span>:<span class="number">49.518</span> FileMerge[<span class="number">3018</span>:<span class="number">303</span>] Unable <span class="keyword">to</span> <span class="keyword">load</span> platform <span class="keyword">at</span> <span class="keyword">path</span> /Applications/Xcode.app/<span class="keyword">Contents</span>/Developer/Platforms/iPhoneSimulator.platform</span><br><span class="line"></span><br><span class="line">git <span class="keyword">status</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">On</span> branch <span class="keyword">master</span></span><br><span class="line">All conflicts <span class="keyword">fixed</span> but you <span class="keyword">are</span> still merging.</span><br><span class="line">  (<span class="keyword">use</span> <span class="string">"git commit"</span> <span class="keyword">to</span> conclude <span class="keyword">merge</span>)</span><br><span class="line"></span><br><span class="line">Changes <span class="keyword">to</span> be committed:</span><br><span class="line"></span><br><span class="line">	modified:   play.js</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (<span class="keyword">use</span> <span class="string">"git add &lt;file&gt;..."</span> <span class="keyword">to</span> <span class="keyword">include</span> <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">	play.js.orig</span></span><br></pre></td></tr></table></figure>
<p>Congrats you have resolved the merge conflict. We still have to commit our changes. Also notice a new (untracked) file was created. This is the same file when the merge conflict was first created, so you have both versions of the code. If multiple files conflict multiple .orig files will be generated. Delete this file and make the commit of the resolved merge.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm play<span class="class">.js</span><span class="class">.orig</span></span><br></pre></td></tr></table></figure>
<p>I made a comment to play.js. Then I committed the changes</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add -A</span><br><span class="line">git <span class="operator"><span class="keyword">commit</span> -<span class="keyword">m</span> <span class="string">'merge the two branches'</span></span></span><br></pre></td></tr></table></figure>
<p>Finally we can delete the develop branch and check that it is gone!</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">git</span> <span class="keyword">branch </span>-d develop </span><br><span class="line"><span class="label">Deleted</span> <span class="keyword">branch </span>develop (was fca53f8).</span><br><span class="line"></span><br><span class="line"><span class="label">git</span> <span class="keyword">branch</span><br><span class="line"></span>* master</span><br></pre></td></tr></table></figure>
<p>Ultimately the develop commit shows up on the commit history of our master branch. There is another way to do this using <code>git rebase</code>. I’ll save that fun for later</p>
<p>Check out the full git history here:</p>
<p><a href="https://github.com/jasonshark/mergeConflicting/commits/master" target="_blank" rel="external">https://github.com/jasonshark/mergeConflicting/commits/master</a></p>

	</div>
</div>
	</div>
</body>
</html>