
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="El Blogo de Connor">
    <title>Build todo list with angular and DRF - El Blogo de Connor</title>
    <meta name="author" content="Connor Leech">
    
    
    <meta name="description" content="The source code is available here.
In this app we’ll build a persistent todo list. The backend and database will be handled by django. django rest framework will convert the tabled data to JSON and an">
<meta property="og:type" content="blog">
<meta property="og:title" content="Build todo list with angular and DRF">
<meta property="og:url" content="http://cleechtech.github.io/2015/10/23/Build-todo-list-with-angular-and-DRF/index.html">
<meta property="og:site_name" content="El Blogo de Connor">
<meta property="og:description" content="The source code is available here.
In this app we’ll build a persistent todo list. The backend and database will be handled by django. django rest framework will convert the tabled data to JSON and an">
<meta property="og:image" content="http://cloud-4.steamusercontent.com/ugc/541889413256781007/8E0E1D04169BD1922CA1467046699255CEB69E02/">
<meta property="og:image" content="http://i62.tinypic.com/2z3uvfb.png">
<meta property="og:image" content="http://media3.giphy.com/media/jYAGkoghdmD9S/giphy.gif">
<meta property="og:updated_time" content="2015-11-29T19:30:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Build todo list with angular and DRF">
<meta name="twitter:description" content="The source code is available here.
In this app we’ll build a persistent todo list. The backend and database will be handled by django. django rest framework will convert the tabled data to JSON and an">
<meta name="twitter:creator" content="@realjasonshark">
    
        <meta rel="publisher" content="https://plus.google.com/+ConnorLeech"/>
    
    
    
        <meta property="og:image" content="http://www.gravatar.com/avatar/88ce5a1f961832585f329292d22451fc?s=640"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/font-awesome.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox-thumbs.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css" type="text/css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-70809574-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="3">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">El Blogo de Connor</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="/#about">
        
        
            <img class="header-picture" src="http://www.gravatar.com/avatar/88ce5a1f961832585f329292d22451fc?s=90"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="3">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="http://www.gravatar.com/avatar/88ce5a1f961832585f329292d22451fc?s=110"/>
            </a>
            <span class="sidebar-profile-name">Connor Leech</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">About</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/cleechtech" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="http://stackoverflow.com/users/2031033/connor-leech" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
                    <span class="sidebar-button-desc">Stack Overflow</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://twitter.com/realjasonshark" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
                    <span class="sidebar-button-desc">Twitter</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://www.linkedin.com/in/connorleech" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
                    <span class="sidebar-button-desc">LinkedIn</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="mailto:connorleech@gmail.com" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">Mail</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="3"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            Build todo list with angular and DRF
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" content="Fri Oct 23 2015 17:46:39 GMT-0700">
	
		    Oct 23, 2015
    	
    </time>
    
</div>
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p>The source code is <a href="https://github.com/jasonshark/angular-drf-todolist" target="_blank" rel="external">available here</a>.</p>
<p>In this app we’ll build a persistent todo list. The backend and database will be handled by django. django rest framework will convert the tabled data to JSON and angular will bring the frontend magic.</p>
<a id="more"></a>
<p><img src="http://cloud-4.steamusercontent.com/ugc/541889413256781007/8E0E1D04169BD1922CA1467046699255CEB69E02/" alt="this is angular"></p>
<h3 id="Clone_the_starter_project">Clone the starter project</h3><p>I made a <a href="git@github.com:jasonshark/django-drf-angular-starter-project.git">angular-drf starter project</a>. We’re going to start from there and build out the todolist. Clone it and give it a new name</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git clone git<span class="variable">@github</span>.<span class="symbol">com:</span>jasonshark/django-drf-angular-starter-project.git</span><br><span class="line"><span class="variable">$ </span>mv django-drf-angular-starter-project angular-drf-todolist</span><br><span class="line"><span class="variable">$ </span>cd angular-drf-todolist</span><br></pre></td></tr></table></figure>
<h3 id="Set_up_virtual_environment">Set up virtual environment</h3><p>We do this so we install the packages locally instead of to your machine. Our project dependencies are specified in <code>requirements.txt</code>.</p>
<figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="char">$ </span>source ~/.bash_profile</span><br><span class="line"><span class="char">$ </span>mkvirtualenv angular-drf-todolist</span><br><span class="line"><span class="char">$ </span>lsvirtualenv</span><br><span class="line"><span class="char">$ </span>pip install -r requirements.txt</span><br></pre></td></tr></table></figure>
<h3 id="Launch_server">Launch server</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./manage<span class="class">.py</span> migrate</span><br><span class="line">$ ./manage<span class="class">.py</span> runserver</span><br></pre></td></tr></table></figure>
<p>This sets up our database and starts the server. Go to <code>localhost:8000</code>. Now angular and drf play nicely</p>
<p><img src="http://i62.tinypic.com/2z3uvfb.png" alt="django on the right"></p>
<h3 id="Create_Todo_model">Create Todo model</h3><p>This is the same as creating a table in our database to hold all of the todos. Each todo will take up a row in the table. The model defines what the columns are going to be. For each todo we’ll have a title, description and is_completed.</p>
<p><strong>jsframework/models.py</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todo</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    title = models.CharField(max_length=<span class="number">75</span>)</span><br><span class="line">    description = models.TextField()</span><br><span class="line">    is_completed = models.BooleanField(default=<span class="keyword">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__unicode__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.title</span><br></pre></td></tr></table></figure></p>
<p>Then make the migrations that turns the above python into a database table: </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./manage<span class="class">.py</span> makemigrations</span><br><span class="line">$ ./manage<span class="class">.py</span> migrate</span><br></pre></td></tr></table></figure>
<p>Check that it worked by opening up the shell and adding a todo:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ./manage<span class="class">.py</span> shell</span><br><span class="line">&gt;&gt;&gt; from jsframework<span class="class">.models</span> import Todo</span><br><span class="line">&gt;&gt;&gt; Todo<span class="class">.objects</span><span class="class">.all</span>()</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt; first_todo = <span class="function"><span class="title">Todo</span><span class="params">(title=<span class="string">'first todo'</span>,description=<span class="string">'a little bit softer now'</span>,is_completed=<span class="string">'false'</span>)</span></span></span><br><span class="line">&gt;&gt;&gt; first_todo.<span class="function"><span class="title">save</span><span class="params">()</span></span></span><br><span class="line">[&lt;Todo: first todo&gt;]</span><br></pre></td></tr></table></figure>
<p>At first there’s nothing, now it looks like we added a todo to the database. Really we want to display this in the browser as JSON so angular can play with it.</p>
<h3 id="Serialize_to_JSON">Serialize to JSON</h3><p>Create a TodoSerializer in a new file <code>jsframework/serializers.py</code>. This will convert our data into json.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> jsframework.models <span class="keyword">import</span> Todo</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoSerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Todo</span><br></pre></td></tr></table></figure>
<p>Now prep our views for rendering JSON:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> viewsets</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> jsframework.models <span class="keyword">import</span> Todo</span><br><span class="line"><span class="keyword">from</span> serializers <span class="keyword">import</span> TodoSerializer</span><br><span class="line"></span><br><span class="line"><span class="comment"># Todos routes automatically generated</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoViewSet</span><span class="params">(viewsets.ModelViewSet)</span>:</span></span><br><span class="line">    queryset = Todo.objects.all()</span><br><span class="line">    serializer_class = TodoSerializer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Home route to send template to angular</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'jsframework/base.html'</span>)</span><br></pre></td></tr></table></figure>
<p>We use the <a href="http://www.django-rest-framework.org/api-guide/viewsets/#modelviewset" target="_blank" rel="external">ModelViewSet</a> which automatically provides us endpoints for <code>.list()</code>, <code>.retrieve()</code>, <code>.create()</code>, <code>.update()</code>, and <code>.destroy()</code>. This is where DRF magic really happens. With that small class above we have the views necessary to create, read, update and delete todos. In the router we’re going to map these out.</p>
<p>Update our routes in <code>jsframework/urls.py</code>. These will define where and what JSON should be displayed.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> patterns, include, url</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> routers</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">todo_router = routers.DefaultRouter()</span><br><span class="line">todo_router.register(<span class="string">r'todos'</span>, views.TodoViewSet, base_name=<span class="string">'todos'</span>)</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># Send base.html to angular</span></span><br><span class="line">    url(<span class="string">r'^$'</span>, views.index, name=<span class="string">'index'</span>),</span><br><span class="line"></span><br><span class="line">    url(<span class="string">'^api/'</span>, include(todo_router.urls)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>Hit <code>http://localhost:8000/api/todos</code> in your browser and you’ll see a JSON array of Todo objects in the nice DRF console. There are buttons for creating (using PUT requests), updating (PUT requests) and deleting (DELETE requests).</p>
<h3 id="Hook_this_sucker_up_to_the_frontend">Hook this sucker up to the frontend</h3><p>We are going to go a bit quick over the angular stuff because there’s a full functional API.</p>
<p>First define the routes and a constant for our API endpoint.</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">var app = angular.module(<span class="string">'drf-angular'</span>, [</span><br><span class="line">    <span class="string">'ui.router'</span></span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">app.constant(<span class="string">'BASE_URL'</span>, <span class="string">'http://localhost:8000/api/todos/'</span>);</span><br><span class="line"></span><br><span class="line">app.config(<span class="keyword">function</span>(<span class="variable">$stateProvider</span>, <span class="variable">$urlRouterProvider</span>)&#123;</span><br><span class="line">    <span class="variable">$stateProvider</span></span><br><span class="line">        .state(<span class="string">'home'</span>, &#123;</span><br><span class="line">            url: <span class="string">'/'</span>,</span><br><span class="line">            templateUrl: <span class="string">'/static/templates/home.html'</span>,</span><br><span class="line">            controller: <span class="string">'MainCtrl'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .state(<span class="string">'add-todo'</span>, &#123;</span><br><span class="line">            url: <span class="string">"/add"</span>,</span><br><span class="line">            templateUrl: <span class="string">'static/templates/add_todo.html'</span>,</span><br><span class="line">            controller: <span class="string">'MainCtrl'</span></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$urlRouterProvider</span>.otherwise(<span class="string">'/'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Special note, we are using <a href="https://github.com/angular-ui/ui-router" target="_blank" rel="external">ui-router</a>. Also, make sure you have trailing slashes on your urls when making requests to DRF. The trailing slash had us stumped for a bit.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// will break without slash at the end</span></span><br><span class="line">app.constant(<span class="string">'BASE_URL</span>', <span class="string">'http</span>:<span class="comment">//localhost:8000/api/todos/');</span></span><br></pre></td></tr></table></figure>
<p>Then define a service that makes requests to DRF and returns promises. We probably could have used <a href="https://docs.angularjs.org/api/ngResource/service/$resource" target="_blank" rel="external">$resource</a> or <a href="https://github.com/mgonto/restangular" target="_blank" rel="external">Restangular</a> here but I am not very familiar with them and do not know if they will survive in Angular 2.0. $http is simple and straight forward. Make http requests and return promises.</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">app.service(<span class="string">'Todos'</span>, <span class="keyword">function</span>(<span class="variable">$http</span>, BASE_URL)&#123;</span><br><span class="line">    var Todos = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Todos.all = function()&#123;</span><br><span class="line">        return <span class="variable">$http</span>.get(BASE_URL);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    Todos.update = function(updatedTodo)&#123;</span><br><span class="line">        return <span class="variable">$http</span>.put(BASE_URL + updatedTodo.id, updatedTodo);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    Todos.delete = function(id)&#123;</span><br><span class="line">        return <span class="variable">$http</span>.delete(BASE_URL + id + <span class="string">'/'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    Todos.addOne = function(newTodo)&#123;</span><br><span class="line">        return <span class="variable">$http</span>.post(BASE_URL, newTodo)</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    return Todos;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Call the service methods in the controller:</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">app.controller(<span class="string">'MainCtrl'</span>, <span class="keyword">function</span>(<span class="variable">$scope</span>, Todos, <span class="variable">$state</span>)&#123;</span><br><span class="line">    <span class="variable">$scope</span>.newTodo = &#123;&#125;;</span><br><span class="line">    <span class="variable">$scope</span>.addTodo = function() &#123;</span><br><span class="line">        Todos.addOne(<span class="variable">$scope</span>.newTodo)</span><br><span class="line">            .then(function(res)&#123;</span><br><span class="line">                // redirect to homepage once added</span><br><span class="line">                <span class="variable">$state</span>.go(<span class="string">'home'</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$scope</span>.toggleCompleted = function(todo) &#123;</span><br><span class="line">        Todos.update(todo);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$scope</span>.deleteTodo = function(id)&#123;</span><br><span class="line">        Todos.delete(id);</span><br><span class="line">        // update the list in ui</span><br><span class="line">        <span class="variable">$scope</span>.todos = <span class="variable">$scope</span>.todos.filter(function(todo)&#123;</span><br><span class="line">            return todo.id !== id;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    Todos.all().then(function(res)&#123;</span><br><span class="line">        <span class="variable">$scope</span>.todos = res.data;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>The delete function is a bit tricky. We have to update <code>$scope.todos</code> on the client and we don’t really want to run the digest cycle again or send another http request, there’s no need. We could do some error handling to make sure the todo was <em>really</em> deleted from the database. Here we filter the normal array, if the id property matches the one we want to delete get rid of it. This solution came from <a href="http://stackoverflow.com/questions/10024866/remove-object-from-array-using-javascript" target="_blank" rel="external">StacktotheOverflow</a>.</p>
<h3 id="Add_add_the_markup">Add add the markup</h3><p><strong>jsframework/static/templates/home.html</strong><br><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'row text-center'</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'col-sm-4 col-sm-offset-4'</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">h1</span>&gt;</span>All Todos<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="title">button</span> <span class="attribute">ui-sref</span>=<span class="value">"add-todo"</span> <span class="attribute">class</span>=<span class="value">'btn btn-primary btn-lg'</span> <span class="attribute">style</span>=<span class="value">'margin-bottom:20px;'</span>&gt;</span>Add Todo<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"list-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span> <span class="attribute">ng-repeat</span>=<span class="value">'todo in todos'</span> <span class="attribute">ng-class</span>=<span class="value">"&#123;completed: todo.is_completed&#125;"</span> <span class="attribute">class</span>=<span class="value">"list-group-item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"checkbox"</span> <span class="attribute">ng-checked</span>=<span class="value">"todo.is_completed"</span> <span class="attribute">ng-change</span>=<span class="value">"toggleCompleted(todo)"</span> <span class="attribute">ng-model</span>=<span class="value">'todo.is_completed'</span>&gt;</span>  </span><span class="expression">&#123;&#123;<span class="variable">todo.title</span>&#125;&#125;</span><span class="xml"></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">'badge'</span> <span class="attribute">ng-click</span>=<span class="value">"deleteTodo(todo.id)"</span>&gt;</span>X<span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<p>The markup will <code>ng-repeat</code> over the todos. <a href="https://docs.angularjs.org/api/ng/directive/ngChange" target="_blank" rel="external">ng-change</a> is a nifty directive that executes a function when whatever you pass to it is updated or changed. I stole this from the <a href="https://github.com/tastejs/todomvc/tree/gh-pages/examples/angularjs" target="_blank" rel="external">Angular.js TodoMVC</a> implementation. <a href="https://docs.angularjs.org/api/ng/directive/ngChecked" target="_blank" rel="external">ng-checked</a> will check the checkbox based on the truthy or falsey value we pass to it. <a href="https://docs.angularjs.org/api/ng/directive/ngClass" target="_blank" rel="external">ng-class</a> is also kind of cool. <a href="https://scotch.io/tutorials/the-many-ways-to-use-ngclass" target="_blank" rel="external">scotch.io</a> has a tutorial there about the many ways to use ngClass.</p>
<p>The CSS for this project is mad simple:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.completed</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">text-decoration</span>:<span class="value"> line-through</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="class">.badge</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">cursor</span>:<span class="value"> pointer</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Then we have a page to add a todo:</p>
<p><strong>jsframework/static/templates/add_todo.html</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=</span><span class="symbol">'row</span> text-center'&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span>=</span><span class="symbol">'col</span>-sm-<span class="number">4</span> col-sm-offset-<span class="number">4</span>'&gt;</span><br><span class="line">        &lt;h1&gt;<span class="type">Add</span> a todo&lt;/h1&gt;</span><br><span class="line">        &lt;input <span class="class"><span class="keyword">type</span>=</span><span class="string">"text"</span> ng-model=<span class="string">"newTodo.title"</span> placeholder=<span class="string">"title"</span> <span class="class"><span class="keyword">class</span>=</span><span class="symbol">'form</span>-control' /&gt;</span><br><span class="line">        &lt;textarea name=<span class="string">"textarea"</span> <span class="class"><span class="keyword">class</span>=</span><span class="string">"form-control"</span> rows=<span class="string">"5"</span> ng-model=<span class="string">"newTodo.description"</span> placeholder=<span class="string">"description"</span>&gt;&lt;/textarea&gt;</span><br><span class="line">        &lt;button <span class="class"><span class="keyword">class</span>=</span><span class="symbol">'btn</span> btn-success btn-lg' ng-click=<span class="string">"addTodo()"</span>&gt;<span class="type">Add</span>&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><img src="http://media3.giphy.com/media/jYAGkoghdmD9S/giphy.gif" alt=""></p>
<p>If you like the tutorial give the <a href="https://github.com/jasonshark/angular-drf-todolist" target="_blank" rel="external">repo</a> a star!</p>

            
                

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Angular/">Angular</a> <a class="tag tag--primary tag--small t-link" href="/tags/Django/">Django</a> <a class="tag tag--primary tag--small t-link" href="/tags/Todo/">Todo</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/10/23/Create-a-comment-list-component-out-of-React-js/"  data-tooltip="Create a comment list component out of React.js">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/10/23/Build-push-notifications-into-an-ionic-app/" data-tooltip="Build push notifications into an ionic app">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://cleechtech.github.io/2015/10/23/Build-todo-list-with-angular-and-DRF/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://cleechtech.github.io/2015/10/23/Build-todo-list-with-angular-and-DRF/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://cleechtech.github.io/2015/10/23/Build-todo-list-with-angular-and-DRF/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2015 Connor Leech. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="3">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/10/23/Create-a-comment-list-component-out-of-React-js/"  data-tooltip="Create a comment list component out of React.js">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/10/23/Build-push-notifications-into-an-ionic-app/" data-tooltip="Build push notifications into an ionic app">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://cleechtech.github.io/2015/10/23/Build-todo-list-with-angular-and-DRF/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://cleechtech.github.io/2015/10/23/Build-todo-list-with-angular-and-DRF/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://cleechtech.github.io/2015/10/23/Build-todo-list-with-angular-and-DRF/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="3">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://cleechtech.github.io/2015/10/23/Build-todo-list-with-angular-and-DRF/">
                <i class="fa fa-google-plus"></i><span class="">Share on Google Plus</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://cleechtech.github.io/2015/10/23/Build-todo-list-with-angular-and-DRF/">
                <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://cleechtech.github.io/2015/10/23/Build-todo-list-with-angular-and-DRF/">
                <i class="fa fa-twitter"></i><span>Share on Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        <!-- Define author's picture -->


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="http://www.gravatar.com/avatar/88ce5a1f961832585f329292d22451fc?s=110"/>
        
            <h4 id="about-card-name">Connor Leech</h4>
        
            <h5 id="about-card-bio"><p>Javascript developer in the Bay Area</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Proteus Digital Health</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Oakland, CA
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/jquery.js" type="text/javascript"></script>
<script src="/assets/js/jquery.fancybox.js" type="text/javascript"></script>
<script src="/assets/js/jquery.fancybox-thumbs.js" type="text/javascript"></script>
<script src="/assets/js/tranquilpeak.js" type="text/javascript"></script>
<!--SCRIPTS END-->

    <script type="text/javascript">
        var disqus_shortname = 'cleechtech';
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>



</html>
