<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<!-- Use Make a deck of cards with Django for dynamic title -->
	<title>El Blogo de Connor</title>

	<!-- Twitter bootstrap (via cdn) -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

	<!-- assets located in source folder -->
	<link rel="stylesheet" href="/css/main.css">

</head>

<div class='row text-center'>
	<form action="//github.us5.list-manage.com/subscribe/post?u=0713e0ac2a414eae4ca4bb786&amp;id=0bdf2bdb00" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="navbar-form" target="_blank" novalidate>
	    <div class="form-group">
	    	<label for="mce-EMAIL">Get notified when I post a new tutorial!</label>
		    <input type="email" value="" name="EMAIL" class="form-control" placeholder="Email address" required>
		    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
		    <div style="position: absolute; left: -5000px;" aria-hidden="true">
		    	<input type="text" name="b_0713e0ac2a414eae4ca4bb786_0bdf2bdb00" tabindex="-1" value="">
		    </div> 	
	    </div>
	    <input type="submit" value="Submit" name="subscribe" class="btn btn-warning">
	</form>
</div>
<body id='wrapper'>
	<div class='hideOverflow'>
		<div class='container blog-post'>
	<div class='row'>
		<div class='col-sm-12'>
			<a href='/' class="btn btn-yellow btn-circle" style='color:grey;'>
            	<i class="fa fa-home fa-2"></i>
        	</a>
		</div>
	</div>
	<div class='row'>
		<h1 class='author-name'>Make a deck of cards with Django</h1>
	    2015-10-23 
	    <hr />
		<p>Learn you Django by making a deck of cards out of internets.<br><a id="more"></a></p>
<p>For the impatient, <a href="https://github.com/jasonshark/django_cards" target="_blank" rel="external">source code is here</a></p>
<p>Start the project</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>django-admin startproject django_cards</span><br><span class="line"><span class="variable">$ </span>cd django_cards</span><br></pre></td></tr></table></figure>
<p>create a virtual environment and activate it</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ virtualenv venv</span><br><span class="line">New python executable <span class="keyword">in</span> venv<span class="regexp">/bin/</span>python2<span class="number">.7</span></span><br><span class="line">Also creating executable <span class="keyword">in</span> venv<span class="regexp">/bin/</span>python</span><br><span class="line">Installing setuptools, pip...done.</span><br><span class="line"></span><br><span class="line">$ . venv<span class="regexp">/bin/</span>activate</span><br><span class="line">(venv) $</span><br></pre></td></tr></table></figure>
<p>venv is a convention. It creates a new environment for our project where we’ll install django and other packages. A virtual environment is like a virtual machine with way less overhead. Add venv to .gitignore for version control.</p>
<p>Install django and generate a requirements.txt file. This is where all the packages that our app requires will be defined. It’s like a gemfile in ruby or package.json in node.</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>pip install django</span><br><span class="line"><span class="variable">$ </span>pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure>
<p>This creates our project directory. Now we create a new app called cards where we will have all of our application logic.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ django-admin<span class="class">.py</span> startapp cards</span><br></pre></td></tr></table></figure>
<p>cards is now an app we’ll use within the django_cards project. In django_cards/settings.py add cards to our installed apps:</p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">INSTALLED_APPS</span> = (</span><br><span class="line">    <span class="symbol">'django</span>.contrib.contenttypes',</span><br><span class="line">    <span class="symbol">'django</span>.contrib.sessions',</span><br><span class="line">    <span class="symbol">'django</span>.contrib.messages',</span><br><span class="line">    <span class="symbol">'django</span>.contrib.staticfiles',</span><br><span class="line">    <span class="symbol">'cards'</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>Create a card model in cards/models.py. This will define the columns in our</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from django<span class="class">.db</span> import models</span><br><span class="line"></span><br><span class="line">class <span class="function"><span class="title">Card</span><span class="params">(models.Model)</span></span>:</span><br><span class="line">    SPADE = <span class="number">0</span></span><br><span class="line">    CLUB = <span class="number">1</span></span><br><span class="line">    DIAMOND = <span class="number">2</span></span><br><span class="line">    HEART = <span class="number">3</span></span><br><span class="line">    SUITS = (</span><br><span class="line">        (SPADE, <span class="string">"spade"</span>),</span><br><span class="line">        (CLUB, <span class="string">"club"</span>),</span><br><span class="line">        (DIAMOND, <span class="string">"diamond"</span>),</span><br><span class="line">        (HEART, <span class="string">"heart"</span>)</span><br><span class="line">    )</span><br><span class="line">    suit = models.<span class="function"><span class="title">PositiveSmallIntegerField</span><span class="params">(choices=SUITS)</span></span></span><br><span class="line">    rank = models.<span class="function"><span class="title">CharField</span><span class="params">(max_length=<span class="number">5</span>)</span></span></span><br></pre></td></tr></table></figure>
<p>Add to a new file cards/utils.py:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> Card</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_deck</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""</span><br><span class="line">    Create a list of playing cards in our database</span><br><span class="line">    """</span></span><br><span class="line">    suits = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">    ranks = [<span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>, <span class="string">'six'</span>, <span class="string">'seven'</span>, <span class="string">'eight'</span>, <span class="string">'nine'</span>, <span class="string">'ten'</span>, <span class="string">'jack'</span>, <span class="string">'queen'</span>, <span class="string">'king'</span>, <span class="string">'ace'</span>]</span><br><span class="line">    cards = [Card(suit=suit, rank=rank) <span class="keyword">for</span> rank <span class="keyword">in</span> ranks <span class="keyword">for</span> suit <span class="keyword">in</span> suits]</span><br><span class="line">    Card.objects.bulk_create(cards)</span><br></pre></td></tr></table></figure>
<p>Now we’re going to set up our database. Make the migrations and migrate the database. We’re also going to run the create deck function.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ python manage<span class="class">.py</span> makemigrations</span><br><span class="line">$ python manage<span class="class">.py</span> migrate</span><br><span class="line">$ python manage<span class="class">.py</span> shell</span><br><span class="line">&gt;&gt; from cards<span class="class">.utils</span> import create_deck</span><br><span class="line">&gt;&gt; <span class="function"><span class="title">create_deck</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>Next we’ll set up routing. In the project directory (django_cards) add a new route: </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url(<span class="string">r'^$'</span>, <span class="string">'cards.views.home'</span>, name=<span class="string">'home'</span>),</span><br></pre></td></tr></table></figure>
<p>This regex matches our index route and will use the view as defined in the views.py file of our card app. The last parameter gives our route a name.</p>
<p>Define the home view:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> Card</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">home</span><span class="params">(request)</span>:</span></span><br><span class="line">	data = &#123;</span><br><span class="line">		<span class="string">'cards'</span>: Card.objects.all()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> render(request, <span class="string">'cards.html'</span>, data)</span><br></pre></td></tr></table></figure>
<p>This provides all the card data to our template. Inside of the cards directory add a templates/cards.html. This will be our homepage. Django automatically knows to search for cards.html inside of a templates directory.</p>
<p>Add a basic loop to templates/cards.html:</p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">    </span><span class="template_tag">&#123;% <span class="keyword">for</span> card <span class="keyword">in</span> cards %&#125;</span><span class="xml"></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>Suit: </span><span class="variable">&#123;&#123; card.suit &#125;&#125;</span><span class="xml">, Rank: </span><span class="variable">&#123;&#123; card.rank &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    </span><span class="template_tag">&#123;% <span class="keyword">endfor</span> %&#125;</span><span class="xml"></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>Then run the server and see the card data displayed on localhost:8000</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python manage<span class="class">.py</span> runserver</span><br></pre></td></tr></table></figure>
<p>We’ll make our template a bit more snazzy:</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">We have </span><span class="expression">&#123;&#123; <span class="variable">cards</span> | <span class="variable">length</span> &#125;&#125;</span><span class="xml"> cards!</span><br><span class="line"></span><br><span class="line">&#123;% for card in cards %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span></span><br><span class="line">            Capitalized Suit: </span><span class="expression">&#123;&#123; <span class="variable">card.get</span>_<span class="variable">suit</span>_<span class="variable">display</span> | <span class="variable">capfirst</span> &#125;&#125;</span><span class="xml"> <span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line">            Uppercased Rank: </span><span class="expression">&#123;&#123; <span class="variable">card.rank</span> | <span class="variable">upper</span> &#125;&#125;</span><span class="xml"></span><br><span class="line">        <span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">&#123;% endfor %&#125;</span></span><br></pre></td></tr></table></figure>
<p>We now use get_FIELD_display to show the suit name. This is a bit magical to me, had to <a href="http://stackoverflow.com/questions/5730211/how-does-get-field-display-in-django-work" target="_blank" rel="external">investigate on SO</a>.</p>
<p>In future tutorials we will build up actual functionality to play cards. Keep an eye on the <a href="https://github.com/jasonshark/django_cards" target="_blank" rel="external">SOURCE code</a> for this tutorial!</p>

	</div>
</div>
	</div>
</body>
</html>