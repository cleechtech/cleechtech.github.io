
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="El Blogo de Connor">
    <title>log in with twitter from client with angular and oauth.io - El Blogo de Connor</title>
    <meta name="author" content="Connor Leech">
    
    
    <meta name="description" content="Authentication using the OAuth.io service on the client side">
<meta property="og:type" content="blog">
<meta property="og:title" content="log in with twitter from client with angular and oauth.io">
<meta property="og:url" content="http://cleechtech.github.io/2015/10/23/log-in-with-twitter-from-client-with-angular-and-oauth-io/index.html">
<meta property="og:site_name" content="El Blogo de Connor">
<meta property="og:description" content="Authentication using the OAuth.io service on the client side">
<meta property="og:image" content="http://cleechtech.github.io/content/images/2015/05/Screen-Shot-2015-05-31-at-11-51-59-AM.png">
<meta property="og:image" content="http://media.giphy.com/media/pzmTB7cwkfx0Q/giphy.gif">
<meta property="og:image" content="http://cleechtech.github.io/content/images/2015/05/Screen-Shot-2015-05-31-at-12-20-58-PM.png">
<meta property="og:image" content="http://media.giphy.com/media/HZCVwHeM5UIrS/giphy.gif">
<meta property="og:image" content="http://media3.giphy.com/media/14up2cTMOGbXPO/giphy.gif">
<meta property="og:updated_time" content="2015-11-29T19:32:54.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="log in with twitter from client with angular and oauth.io">
<meta name="twitter:description" content="Authentication using the OAuth.io service on the client side">
<meta name="twitter:creator" content="@realjasonshark">
    
        <meta rel="publisher" content="https://plus.google.com/+ConnorLeech"/>
    
    
    
        <meta property="og:image" content="http://www.gravatar.com/avatar/88ce5a1f961832585f329292d22451fc?s=640"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/font-awesome.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox-thumbs.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css" type="text/css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-70809574-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="3">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">El Blogo de Connor</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="/#about">
        
        
            <img class="header-picture" src="http://www.gravatar.com/avatar/88ce5a1f961832585f329292d22451fc?s=90"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="3">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="http://www.gravatar.com/avatar/88ce5a1f961832585f329292d22451fc?s=110"/>
            </a>
            <span class="sidebar-profile-name">Connor Leech</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">About</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/cleechtech" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="http://stackoverflow.com/users/2031033/connor-leech" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
                    <span class="sidebar-button-desc">Stack Overflow</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://twitter.com/realjasonshark" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
                    <span class="sidebar-button-desc">Twitter</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://www.linkedin.com/in/connorleech" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
                    <span class="sidebar-button-desc">LinkedIn</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="mailto:connorleech@gmail.com" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">Mail</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="3"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            log in with twitter from client with angular and oauth.io
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" content="Fri Oct 23 2015 17:58:20 GMT-0700">
	
		    Oct 23, 2015
    	
    </time>
    
</div>
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p>Authentication using the OAuth.io service on the client side<br><a id="more"></a></p>
<p>First off thank you to Preetish Panda for his tutorial on oauth.io. You can find that tutorial <a href="http://www.sitepoint.com/building-twitter-app-using-angularjs" target="_blank" rel="external">here</a>.</p>
<p>===============</p>
<p><a href="https://github.com/jasonshark/oauthio-example" target="_blank" rel="external">SOURCE CODE</a> for this tutorial.</p>
<p><a href="http://connorlee.ch/oauthio-example/#/" target="_blank" rel="external">DEMO</a> of async twitter authentication</p>
<h3 id="Getting_started">Getting started</h3><p>Create a static bare-bones angular app. There is an angular.js starter app <a href="https://github.com/jasonshark/angular-starter" target="_blank" rel="external">here</a>.</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git clone git<span class="variable">@github</span>.<span class="symbol">com:</span>jasonshark/angular-starter.git</span><br><span class="line"><span class="variable">$ </span>cd angular-starter</span><br><span class="line"><span class="variable">$ </span>python -m <span class="constant">SimpleHTTPServer</span></span><br></pre></td></tr></table></figure>
<p>If you’re using git and want to push this to your own repo add it as a remote:</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git remote rm origin</span><br><span class="line"><span class="variable">$ </span>git remote add origin &lt;your_remote_url&gt;</span><br><span class="line"><span class="variable">$ </span>git push origin master</span><br></pre></td></tr></table></figure>
<h3 id="Create_an_app_with_twitter">Create an app with twitter</h3><p>We are going to use twitter to handle our authentication. That means “Log in with twitter”. In order to do that we need to register an application with the good folks at twitter.</p>
<p>Go here: <a href="https://apps.twitter.com/app/new" target="_blank" rel="external">https://apps.twitter.com/app/new</a></p>
<p><img src="/content/images/2015/05/Screen-Shot-2015-05-31-at-11-51-59-AM.png" alt=""></p>
<p>For the record you also need to have a mobile phone associated with your twitter profile before you can create an application. Go to settings/mobile to add one. <a href="https://oauth.io/auth" target="_blank" rel="external">https://oauth.io/auth</a> is our Callback URL. For the website URL I am using my custome domain hosted by <a href="https://pages.github.com/" target="_blank" rel="external">Github Pages</a>. It is free with your github account and is a good tool and way to showcase your work.</p>
<p><img src="http://media.giphy.com/media/pzmTB7cwkfx0Q/giphy.gif" alt=""></p>
<h3 id="Create_auth-io_account">Create auth.io account</h3><p><a href="http://oauth.net/" target="_blank" rel="external">OAuth</a> is an open protocol for authorization across applications. <a href="https://oauth.io/home" target="_blank" rel="external">OAuth.io</a> is a company that makes using the OAuth protocol mad simple. The two are different. We can make 2000 API calls per month for free using oauth.io. If we make 20,000 API calls per month using oauth.io it costs $20.</p>
<p>To use oauth.io to handle authentication create an account with them: <a href="https://oauth.io/signup" target="_blank" rel="external">https://oauth.io/signup</a></p>
<p>On the dashboard click “Integrated APIs” and add the twitter app’s credentials. The first one is “Consumer Key (API Key)” and the next field is “Consumer Secret (API Secret)” which both come from the “Keys and Access Tokens” panel on your twitter app registration page.</p>
<p><img src="/content/images/2015/05/Screen-Shot-2015-05-31-at-12-20-58-PM.png" alt=""></p>
<p>Save changes and you should be able to successfully “Try Auth”.</p>
<h3 id="Enough_setup,_let’s_code">Enough setup, let’s code</h3><p>We’re going to use the oath.js library. Download it from their <a href="https://github.com/oauth-io/oauth-js/blob/master/dist/oauth.js" target="_blank" rel="external">github repo</a> and then link to the script:</p>
<p><code>&lt;script src=&#39;js/lib/oauth.js&#39;&gt;&lt;/script&gt;</code></p>
<p>After we initialize our main angular app in <code>js/app.js</code> add a constant with your oauth.io <strong>Public Key</strong>.</p>
<p>We’re also gunna define routes using <a href="https://github.com/angular-ui/ui-router" target="_blank" rel="external">ui-router</a>:</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var app = angular.module(<span class="string">'angular-starter'</span>, [</span><br><span class="line">	<span class="string">'ui.router'</span></span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">app.constant(<span class="string">'OAUTH_PUBLIC_KEY'</span>, <span class="string">'p2edLIP-Hu5-VvhkJN1T_Ncba0M'</span>);</span><br><span class="line"></span><br><span class="line">app.config(<span class="keyword">function</span>(<span class="variable">$stateProvider</span>, <span class="variable">$urlRouterProvider</span>)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="variable">$urlRouterProvider</span>.otherwise(<span class="string">"/"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="variable">$stateProvider</span></span><br><span class="line">	    .state(<span class="string">'home'</span>, &#123;</span><br><span class="line">	      url: <span class="string">"/"</span>,</span><br><span class="line">	      templateUrl: <span class="string">"templates/main.html"</span>,</span><br><span class="line">	      controller: <span class="string">'MainCtrl'</span></span><br><span class="line">	    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Then we’ll define the template. It is a simple navbar with sign in, hello message and log out buttons. We show them conditionally based on a <code>$rootScope</code> value we’ll get to in a second. ng-if hides or shows based on if <code>$scope.currentUser</code> is true or false.</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'row'</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">nav</span> <span class="attribute">class</span>=<span class="value">"navbar navbar-default"</span> <span class="attribute">role</span>=<span class="value">"navigation"</span>&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"navbar-header"</span>&gt;</span></span><br><span class="line">	      <span class="tag">&lt;<span class="title">a</span> <span class="attribute">class</span>=<span class="value">"navbar-brand"</span> <span class="attribute">href</span>=<span class="value">"#"</span>&gt;</span>oauth.io-example<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">	   <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">	      <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"nav navbar-nav pull-right"</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="title">li</span>&gt;</span></span><br><span class="line">	        	<span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span> <span class="attribute">ng-if</span>=<span class="value">'!currentUser'</span> <span class="attribute">ng-click</span>=<span class="value">"signIn()"</span>&gt;</span>Sign in with twitter<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">	    	<span class="tag">&lt;<span class="title">li</span>&gt;</span></span><br><span class="line">	    		<span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span> <span class="attribute">ng-if</span>=<span class="value">'currentUser'</span>&gt;</span>Hello </span><span class="expression">&#123;&#123;<span class="variable">currentUser.name</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">	    	<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">	    	<span class="tag">&lt;<span class="title">li</span>&gt;</span></span><br><span class="line">	    		<span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span> <span class="attribute">ng-if</span>=<span class="value">'currentUser'</span> <span class="attribute">ng-click</span>=<span class="value">"signOut()"</span> <span class="attribute">id</span>=<span class="value">"signOut"</span>&gt;</span>Sign Out<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">	    	<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">	      <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line">	   <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'row'</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">pre</span></span></span><span class="expression">&#123;&#123; <span class="variable">currentUser</span> | <span class="variable">json</span> &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="attribute">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>Next we’ll setup MainCtrl:</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">app.controller(<span class="string">'MainCtrl'</span>, <span class="keyword">function</span>(<span class="variable">$scope</span>, oauth)&#123;</span><br><span class="line">	<span class="variable">$scope</span>.user = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	//when the user clicks the connect twitter button, the popup authorization window opens</span><br><span class="line">    <span class="variable">$scope</span>.signIn = function() &#123;</span><br><span class="line">        oauth.connectTwitter();</span><br><span class="line">    &#125;;</span><br><span class="line"> </span><br><span class="line">    //sign out clears the OAuth cache, the user will have to reauthenticate when returning</span><br><span class="line">    <span class="variable">$scope</span>.signOut = function() &#123;</span><br><span class="line">        oauth.clearCache();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    //if the user is a returning user, hide the sign in button and display the tweets</span><br><span class="line">    if (oauth.isReady()) &#123;</span><br><span class="line">    	// gets data and updates <span class="variable">$rootScope</span></span><br><span class="line">        oauth.getUserData();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>All of the work will really be happening in our oauth service.</p>
<h3 id="oauth_service">oauth service</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">app.service(<span class="string">'oauth'</span>, <span class="function"><span class="keyword">function</span><span class="params">(OAUTH_PUBLIC_KEY, <span class="variable">$q</span>, <span class="variable">$http</span>, <span class="variable">$rootScope</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> authorizationResult = <span class="keyword">false</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        initialize: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="variable">$rootScope</span>.currentUser = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//initialize OAuth.io with public key of the application</span></span><br><span class="line">            OAuth.initialize(OAUTH_PUBLIC_KEY, &#123;</span><br><span class="line">                cache: <span class="keyword">true</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">//try to create an authorization result when the page loads,</span></span><br><span class="line">            <span class="comment">// this means a returning user won't have to click the twitter button again</span></span><br><span class="line">            authorizationResult = OAuth.create(<span class="string">"twitter"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        isReady: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> (authorizationResult);</span><br><span class="line">        &#125;,</span><br><span class="line">        connectTwitter: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> deferred = <span class="variable">$q</span>.defer();</span><br><span class="line">            <span class="keyword">var</span> <span class="keyword">self</span> = this;</span><br><span class="line"></span><br><span class="line">            OAuth.popup(<span class="string">"twitter"</span>, &#123;</span><br><span class="line">                cache: <span class="keyword">true</span></span><br><span class="line">            &#125;, <span class="function"><span class="keyword">function</span><span class="params">(error, result)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (!error) &#123;</span><br><span class="line">                    <span class="comment">// update token</span></span><br><span class="line">                    authorizationResult = result;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// get data from twitter</span></span><br><span class="line">                    <span class="keyword">self</span>.getUserData();</span><br><span class="line">                    deferred.resolve();</span><br><span class="line">                    </span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// shit shit fire ze missiles</span></span><br><span class="line">                    deferred.reject();</span><br><span class="line">                    console.error(<span class="string">'could not connect to twitter'</span>);</span><br><span class="line">                    <span class="variable">$rootScope</span>.currentUser = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> deferred.promise;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        getUserData: <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">var</span> oauth_token = this.isReady();</span><br><span class="line">            <span class="keyword">if</span>(oauth_token)&#123;</span><br><span class="line">                <span class="comment">// get user's data from token</span></span><br><span class="line">                oauth_token.me().done(<span class="function"><span class="keyword">function</span><span class="params">(currentUser)</span></span>&#123;</span><br><span class="line">                    <span class="variable">$rootScope</span>.currentUser = currentUser;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// run the digest cycle to update scope with the </span></span><br><span class="line">                    <span class="comment">// data we got from .me() oauth.io method</span></span><br><span class="line">                    <span class="variable">$rootScope</span>.<span class="variable">$apply</span>();</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                console.error(<span class="string">'Cannot get user data. No one is logged in!'</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        clearCache: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">// log them out and clear the scope</span></span><br><span class="line">            OAuth.clearCache(<span class="string">'twitter'</span>);</span><br><span class="line">            <span class="variable">$rootScope</span>.currentUser = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img src="http://media.giphy.com/media/HZCVwHeM5UIrS/giphy.gif" alt=""></p>
<p>In the <code>getUserData</code> function I get the logged in user’s information via <a href="http://docs.oauth.io/?Javascript#user-data-api" target="_blank" rel="external">.me()</a> otherwise their info is only the token. We update the $rootScope and then have to run the digest cycle again with $apply() to let angular know about the changes. </p>
<p>This is not perfect. The client could change the value of <code>$rootScope</code> and nothing would really be hidden. This does not really secure our app but it does get data from twitter for us. oauth.io has hundreds of services that we could get information from. Log in to the dashboard, click “Integrated APIs” then “Add APIs” and type any provider you can think of. If we wanted to associate our own data with a user’s account we would need our own database and server, or we could use <a href="https://www.firebase.com/" target="_blank" rel="external">firebase</a></p>
<p>Here is the completed <a href="http://connorlee.ch/oauthio-example/#/" target="_blank" rel="external">DEMO</a>. </p>
<p>Add your github url (<code>&lt;username&gt;.github.io</code>) to “Domains &amp; URLs whitelist” on the oauth.io dashboard homepage and you can have a live site also.</p>
<p>final <a href="https://github.com/jasonshark/oauthio-example" target="_blank" rel="external">SOURCE CODE</a>. Give it a star!</p>
<iframe src="https://ghbtns.com/github-btn.html?user=jasonshark&repo=oauthio-example&type=star&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>

<p><img src="http://media3.giphy.com/media/14up2cTMOGbXPO/giphy.gif" alt=""></p>

            
                

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Angular/">Angular</a> <a class="tag tag--primary tag--small t-link" href="/tags/Javascript/">Javascript</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/10/23/Make-a-deck-of-cards-with-Django/"  data-tooltip="Make a deck of cards with Django">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/10/23/Intro-to-angular-ui-router/" data-tooltip="Intro to angular-ui-router">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://cleechtech.github.io/2015/10/23/log-in-with-twitter-from-client-with-angular-and-oauth-io/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://cleechtech.github.io/2015/10/23/log-in-with-twitter-from-client-with-angular-and-oauth-io/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://cleechtech.github.io/2015/10/23/log-in-with-twitter-from-client-with-angular-and-oauth-io/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2015 Connor Leech. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="3">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/10/23/Make-a-deck-of-cards-with-Django/"  data-tooltip="Make a deck of cards with Django">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/10/23/Intro-to-angular-ui-router/" data-tooltip="Intro to angular-ui-router">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://cleechtech.github.io/2015/10/23/log-in-with-twitter-from-client-with-angular-and-oauth-io/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://cleechtech.github.io/2015/10/23/log-in-with-twitter-from-client-with-angular-and-oauth-io/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://cleechtech.github.io/2015/10/23/log-in-with-twitter-from-client-with-angular-and-oauth-io/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="3">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://cleechtech.github.io/2015/10/23/log-in-with-twitter-from-client-with-angular-and-oauth-io/">
                <i class="fa fa-google-plus"></i><span class="">Share on Google Plus</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://cleechtech.github.io/2015/10/23/log-in-with-twitter-from-client-with-angular-and-oauth-io/">
                <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://cleechtech.github.io/2015/10/23/log-in-with-twitter-from-client-with-angular-and-oauth-io/">
                <i class="fa fa-twitter"></i><span>Share on Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        <!-- Define author's picture -->


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="http://www.gravatar.com/avatar/88ce5a1f961832585f329292d22451fc?s=110"/>
        
            <h4 id="about-card-name">Connor Leech</h4>
        
            <h5 id="about-card-bio"><p>Javascript developer in the Bay Area</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Proteus Digital Health</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Oakland, CA
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/jquery.js" type="text/javascript"></script>
<script src="/assets/js/jquery.fancybox.js" type="text/javascript"></script>
<script src="/assets/js/jquery.fancybox-thumbs.js" type="text/javascript"></script>
<script src="/assets/js/tranquilpeak.js" type="text/javascript"></script>
<!--SCRIPTS END-->

    <script type="text/javascript">
        var disqus_shortname = 'cleechtech';
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>



</html>
